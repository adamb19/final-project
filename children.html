<!DOCTYPE HTML>
<html lang="en">
  <head>
    <meta charset="utf-8">
	 <link href="calculator.css" rel="stylesheet" type="text/css"/>
  	<title>calculator</title>
  </head>
  <body id="wrapper">
  	<div>
  		<h1>calculator</h1>
  	</div>
	<nav>
  	<ul> 
  	  <li><a class="active" href="children.html">children</a></li>
  	  <li><a href="adults.html">adults</a></li>
  	  <li><a href="both.html">both</a></li>
    </ul>
	</nav>
    <div>
	<script src="jquery.js"></script>
    <script src="calculator.js"></script>
    <script>
	$(document).ready(function(){
	  $("button").click(function(){
	   try{
	    var result= calculator.parse($("input").val())
		$("span").html(result);
	   }catch(e){
	   $("span").html(String(e));
	  }
	 });
	});
    </script>
    <h2>calculator demo</h2>
    <p class="centre">
      <input type="text" value="PI*4^2 + 5"/> <button>equals</button> <span></span>
    </p>
    
    <pre class="centre">      
      /* description: Parses end evaluates mathematical expressions. */

      /* lexical grammar */
      %lex
      %%
      \s+                   {/* skip whitespace */}
      [0-9]+("."[0-9]+)?\b  {return 'NUMBER';}
      "*"                   {return '*';}
      "/"                   {return '/';}
      "-"                   {return '-';}
      "+"                   {return '+';}
      "^"                   {return '^';}
      "("                   {return '(';}
      ")"                   {return ')';}
      "PI"                  {return 'PI';}
      "E"                   {return 'E';}
      &lt;&lt;EOF>>               {return 'EOF';}

      /lex

      /* operator associations and precedence */

      %left '+' '-'
      %left '*' '/'
      %left '^'
      %left UMINUS

      %start expressions

      %% /* language grammar */

      expressions
          : e EOF
              {return $1;}
          ;

      e
          : e '+' e
              {$$ = $1 + $3;}
          | e '-' e
              {$$ = $1 - $3;}
          | e '*' e
              {$$ = $1 * $3;}
          | e '/' e
              {$$ = $1 / $3;}
          | e '^' e
              {$$ = Math.pow($1, $3);}
          | '-' e %prec UMINUS
              {$$ = -$2;}
          | '(' e ')'
              {$$ = $2;}
          | NUMBER
              {$$ = Number(yytext);}
          | E
              {$$ = Math.E;}
          | PI
              {$$ = Math.PI;}
          ;

  </pre>
  </body>
</html>
